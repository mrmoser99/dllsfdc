[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v36.0/sobjects/skuid__Page__c/a2W1I000000SToyUAG"},"Id":"a2W1I000000SToyUAG","Name":"NGTaskList","skuid__Type__c":"Desktop","skuid__UniqueId__c":"ngUi_NGTaskList","skuid__Module__c":"ngUi","skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"\" showsidebar=\"false\" showheader=\"false\" personalizationmode=\"server\">\n    <models>\n        <model id=\"LDApplication\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" doclone=\"no\" type=\"\" sobject=\"genesis__Applications__c\" datasource=\"salesforce\">\n            <fields>\n                <field id=\"Id\"/>\n                <field id=\"genesis__Status__c\"/>\n                <field id=\"Name\"/>\n                <field id=\"genesis__Description__c\"/>\n                <field id=\"genesis__Overall_Status__c\"/>\n            <field id=\"genesis__CL_Product_Name__c\"/><field id=\"Owner.Profile.Id\"/><field id=\"Owner.Profile.Name\"/><field id=\"OwnerId\"/><field id=\"Owner.Name\"/></fields>\n            <conditions>\n                <condition type=\"param\" value=\"id\" operator=\"=\" field=\"Id\" state=\"\" enclosevalueinquotes=\"true\" novaluebehavior=\"noquery\"/>\n            </conditions>\n            <actions/>\n        </model>\n        <model id=\"DummyObj\" limit=\"1\" query=\"true\" createrowifnonefound=\"true\" sobject=\"genesis__Applications__c\" doclone=\"\" type=\"\" datasource=\"salesforce\">\n            <fields>\n                <field id=\"genesis__Description__c\"/>\n                <field id=\"Id\"/>\n            </fields>\n            <conditions>\n                <condition type=\"blank\" value=\"null\" field=\"Id\" operator=\"=\" enclosevalueinquotes=\"false\" state=\"\"/>\n            </conditions>\n            <actions/>\n        </model>\n        <model id=\"LDOrgParam\" limit=\"\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"genesis__Org_Parameters__c\">\n            <fields>\n                <field id=\"genesis__Namespace_Prefix__c\"/>\n                <field id=\"Id\"/>\n            </fields>\n            <conditions/>\n            <actions/>\n        </model>\n    </models>\n    <components>\n        <pagetitle uniqueid=\"LASummaryPT\" model=\"LDApplication\">\n            <maintitle>Lease Approval Summary</maintitle>\n            <actions/>\n        </pagetitle>\n        <pagetitle uniqueid=\"LSButton\" model=\"LDApplication\" cssclass=\"LSButtonC hrLine\">\n            <actions>\n                <action type=\"multi\" label=\"Documents Required\" cssclass=\"square lochmara\" uniqueid=\"docExec\">\n                    <actions/>\n                <renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"LDApplication\" sourcetype=\"fieldvalue\" field=\"genesis__CL_Product_Name__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"Operating Lease\"/></renderconditions><enableconditions logictype=\"and\"/><hotkeys/></action>\n                <action type=\"multi\" label=\"Dealer Checklist\" cssclass=\"square treeP\" uniqueid=\"sk-1Qw6Su-80\">\n                    <actions/>\n                </action>\n                <action type=\"multi\" label=\"NewCo Checklist\" cssclass=\"square limedS\" uniqueid=\"sk-1Qw6T2-82\"/>\n                <action type=\"multi\" label=\"Exception Tasks\" cssclass=\"square tskOutstanding\" uniqueid=\"sk-1Qw6TD-84\"/>\n            </actions>\n        <renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"LDApplication\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"Name\" fieldtargetobjects=\"genesis__Applications__c\" value=\"NULL\"/></renderconditions></pagetitle>\n        <pagetitle model=\"LDApplication\" uniqueid=\"task-list-name\" cssclass=\"\">\n            <actions>\n                <action type=\"multi\" label=\"Submit To Next Stage\" uniqueid=\"submitToNxtDept\" icon=\"\" cssclass=\"iconic-button iconic-button-next-stage-submit\">\n                    <hotkeys/>\n                    <actions>\n                        <action type=\"custom\" snippet=\"submitToNextDepartmentJs\">\n                            <onerroractions>\n                                <action type=\"blockUI\" message=\"There was an error\" timeout=\"3000\"/>\n                            </onerroractions>\n                        </action>\n                    </actions>\n                    <renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"LDApplication\" sourcetype=\"fieldvalue\" field=\"Name\" fieldtargetobjects=\"genesis__Applications__c\" value=\"NULL\"/></renderconditions>\n                <enableconditions logictype=\"or\"/></action>\n                <action type=\"multi\" label=\"Create Exception Task\" icon=\"\" cssclass=\"iconic-button iconic-button-exception-task\" uniqueid=\"createExceptionTsk\">\n                    <hotkeys/>\n                    <renderconditions logictype=\"and\"/>\n                    <actions>\n                        <action type=\"custom\" snippet=\"LaunchTaskCreationDialog\"/>\n                    </actions>\n                </action>\n            </actions>\n            <renderconditions logictype=\"and\"/>\n            <maintitle>&lt;b&gt;Current Status:&lt;/b&gt; {{genesis__Status__c}}</maintitle>\n        </pagetitle><template multiple=\"true\" uniqueid=\"sk-3g1n87-253\" model=\"LDApplication\"><contents>&lt;iframe src=\"https://c.cs66.visual.force.com/apex/DealerCheckList?id={{{$Model.LDApplication.data.0.Id}}}\" width=\"100%\" height=\"90%\" frameborder=\"0\"/&gt;</contents><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"LDApplication\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"Owner.Profile.Name\" value=\"Newco Dealer\"/></renderconditions></template>\n        <template multiple=\"true\" model=\"LDApplication\" uniqueid=\"sk-qXfi0-88\">\n            \n            <renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"LDApplication\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"Owner.Profile.Name\" value=\"Newco Dealer\"/></renderconditions>\n        <contents>&lt;iframe src=\"https://c.cs66.visual.force.com/apex/NewCoCheckList?id={{{$Model.LDApplication.data.0.Id}}}\" width=\"100%\" height=\"90%\" frameborder=\"0\"/&gt;</contents></template>\n    </components>\n    <resources>\n        <labels/>\n        <javascript>\n            <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" content_type=\"application/zip\" filepath=\"mainPage.js\">var params = arguments[0],\n  $ = skuid.$;\n</jsitem>\n            <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"commonUtils.js\">var params = arguments[0],\n    $ = skuid.$;\n</jsitem>\n            <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"messageUtils.js\">var params = arguments[0],\n    $ = skuid.$;\n</jsitem>\n            <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"windowCallbacks.js\">var params = arguments[0],\n    $ = skuid.$;\n</jsitem>\n            <jsitem location=\"external\" name=\"NGTaskList_AjaxToolKit\" cachelocation=\"false\" url=\"/soap/ajax/40.0/apex.js\">var params = arguments[0],\n    $ = skuid.$;\n</jsitem>\n            <jsitem location=\"inline\" name=\"onloadDataJs\" cachelocation=\"false\" url=\"\">(function(skuid){\n    var $ = skuid.$;\n    $('.nx-page').one('pageload',function(){\n\n        $('#submitToNxtDept').attr('title', 'Submit To Next Department');\n        $('#createExceptionTsk').attr('title', 'Create Exception Task');\n\n       var appRow = skuid.model.getModel('LDApplication').getFirstRow();\n       var appId = appRow.Id;\n\n        // document required\n        var queryForDocumentException = \"SELECT count() from clcommon__Document_Category__c where clcommon__Required__c = true and clcommon__Status__c = 'OPEN' AND genesis__Application__c = \\'\"+ appId +\"\\'\";\n        var docExceptionCount = sforce.connection.query(queryForDocumentException);\n        $('.square.lochmara').attr('execVal',docExceptionCount.size);\n        \n        // credit dept tasks\n        var queryCreditDeptTaskSetups = \"SELECT count() from genesis__ProductDepartment_Task_Junction__c where genesis__Department__c = 'DEALER CHECKLIST' AND genesis__Product_Name__c = 'Finance Lease'\";\n        var queryCreditDeptTask = \"SELECT count() from Task where genesis__Department__r.Name = 'DEALER CHECKLIST' AND IsClosed = true AND genesis__Application__c = \\'\" +appId + \"\\'\";\n        var creditDeptTaskSetups = sforce.connection.query(queryCreditDeptTaskSetups);\n        var creditDeptTasks = sforce.connection.query(queryCreditDeptTask);\n        $('.square.treeP').attr('execVal',creditDeptTaskSetups.size - creditDeptTasks.size);\n        \n        \n        // booking dept tasks\n        var queryBookingDeptTaskSetups = \"SELECT count() from genesis__ProductDepartment_Task_Junction__c where genesis__Department__c = 'NEWCO CHECKLIST' AND genesis__Product_Name__c = 'Finance Lease'\";\n        var queryBookingDeptTasks = \"SELECT count() from Task where genesis__Department__r.Name = 'NEWCO CHECKLIST' AND IsClosed = true AND genesis__Application__c = \\'\" +appId + \"\\'\";\n        var bookingDeptTaskSetups = sforce.connection.query(queryBookingDeptTaskSetups);\n        var bookingDeptTasks = sforce.connection.query(queryBookingDeptTasks);\n        $('.square.limedS').attr('execVal',bookingDeptTaskSetups.size - bookingDeptTasks.size);\n        \n        /*\n        // example for customization\n        // booking dept tasks\n        queryBookingDeptTaskSetups = \"SELECT count() from genesis__ProductDepartment_Task_Junction__c where genesis__Department__c = 'Booking Department' AND genesis__Product_Name__c = 'Finance Lease'\";\n        queryBookingDeptTasks = \"SELECT count() from Task where genesis__Department__r.Name = 'Booking Department' AND IsClosed = true AND genesis__Application__c = \\'\" +appId + \"\\'\";\n        bookingDeptTaskSetups = sforce.connection.query(queryBookingDeptTaskSetups);\n        bookingDeptTasks = sforce.connection.query(queryBookingDeptTasks);\n        $('.square.limedS').attr('execVal',bookingDeptTaskSetups.size - bookingDeptTasks.size);\n        */\n        \n        // exception tasks count\n        var queryForExcpTask = \"SELECT count() from Task where IsClosed != true and genesis__Application__c = \\'\"+ appId +\"\\' and genesis__Task_Setup__c = NULL\";\n        var exceptionTasksCount = sforce.connection.query(queryForExcpTask);\n        $('.square.tskOutstanding').attr('execVal',exceptionTasksCount.size);\n        \n        \n        var iframeHeight = window.innerHeight - 65;\n        $('iframe').height(iframeHeight);\n\n        if(appRow.genesis__Overall_Status__c){\n            console.log(appRow.genesis__Overall_Status__c);\n            appRow.genesis__Overall_Status__c = appRow.genesis__Overall_Status__c.replace('Being Processed By', '');\n            appRow.genesis__Overall_Status__c = appRow.genesis__Overall_Status__c.replace('Waiting for', '');\n        }\n\n        var showSubmitButton = sforce.apex.execute('genesis.LoanDashBoard','showSubmitToNxtDeptBtn',\n            {\n                    applicationId : appRow.Id\n            });\n\n        if(showSubmitButton == 'true'){\n            $('#submitToNxtDept').button('enable');\n        }else{\n            $('#submitToNxtDept').button('disable');\n        }\n    });\n})(skuid);</jsitem>\n            <jsitem location=\"inlinesnippet\" name=\"submitToNextDepartmentJs\" cachelocation=\"false\">var appModels = skuid.model.getModel('LDApplication');\nvar appRow = appModels.data[0];\n\nvar showSubmitButton = sforce.apex.execute('genesis.LoanDashBoard','submitToNextDepartment',\n{\n        applicationId : appRow.Id\n});\n\ntoTopLevelAndRefresh({iframeIds: ['task-list-popover']});\n\nvar title = 'Submit To Next Department';\nvar content = '&lt;p&gt;' + showSubmitButton + '&lt;/p&gt;';\nvar type = 'alert';\nopenTopLevelDialog({\n    type : type,\n  title: title,\n  prefixHtml: content\n});</jsitem>\n            <jsitem location=\"inlinesnippet\" name=\"LaunchTaskCreationDialog\" cachelocation=\"false\">var params = arguments[0],\n  $ = skuid.$;\n\nvar appId = params.row.Id;\nvar title = 'Add Exception Task';\nvar skuidPage = 'NewTaskCreation';\nvar iframeUrl = '/apex/skuid__ui?page=' + skuidPage + '&amp;id=' + appId;\n\nopenTopLevelDialog({\n    title: title,\n    iframeUrl: iframeUrl\n});\n</jsitem>\n        </javascript>\n        <css>\n            <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"cls-dashboard.css\"/>\n            <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"cls-common.css\"/>\n            <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"cls-dialog.css\"/>\n            <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"customcss.css\"/>\n            <cssitem location=\"inline\" name=\"AdjustLayout\" cachelocation=\"false\">.nx-page[pagename=NGTaskList] {\n  padding-top: 24px;\n  padding-right: 0;\n  padding-left: 0;\n  background-color: white;\n}\n\nbody {\n  background-color: #FFFFFF;\n}\n\nbody &gt; .nx-page {\n    background-color: #FFFFFF;\n}\n\n.square.lochmara:after {\n    content: attr(execVal);\n    font-size:24px;\n}\n\n.square.treeP:after {\n    content: attr(execVal);\n    font-size:24px;\n}\n\n.square.limedS:after {\n    content: attr(execVal);\n    font-size:24px;\n}\n\n.square.tskOutstanding:after {\n    content: attr(execVal);\n    font-size:24px;\n}\n\n.square .leaseAdmin:after {\n    content: attr(execVal);\n    font-size:24px;\n}\n\n.LSButtonC.hrLine {\n    border-bottom: 1px solid #ebeef0;\n    margin-left:16px;\n    margin-right:7px;\n    padding-bottom: 10px;\n}\n\n.noHrLine .nx-basicfieldeditor-item {\n    border-bottom:none;\n}\n\n#task-list-name {\n  background-color: #2d5074;\n    color: white;\n    margin-left: 13px;\n    margin-right: 6px;\n}\n\n#task-list-name .nx-editor-contents-template {\n    color: #333;\n    margin-left: -8px;\n    font-size: 14px;\n    padding-top: 10px;\n}\n\n#task-list-name .nx-fieldtext {\n    font-size: 14px;\n    display:inline-block;\n}\n\n#LASummaryPT{\n    margin-bottom: 20px;\n    margin-top: -18px;\n}\n\n\n</cssitem>\n        <cssitem location=\"inline\" name=\"TADcss\" cachelocation=\"false\">#task-list-name {\n    background-color: #ffffff;\n    margin-bottom: 20px;\n}\n.status-title {\n    color: #37444e;\n    size: 13px;\n}\n.square.lochmara {\n    background-color: #1cbdd4;\n}\n.square .leaseAdmin {\n    background-color: #000000;\n}\n.ui-button.iconic-button.iconic-button-exception-task,\n.ui-button.iconic-button.iconic-button-exception-task.ui-state-hover,\n.ui-button.iconic-button.iconic-button-exception-task.ui-state-focus {\n    border: 0px;\n    margin-top: -08px;\n    margin-left: -120px;\n    position: absolute;\n    z-index: 1000;\n}\n.ui-button.iconic-button.iconic-button-exception-task:before,\n.ui-button.iconic-button.iconic-button-exception-task.ui-state-hover:before,\n.ui-button.iconic-button.iconic-button-exception-task.ui-state-focus:before {\n    font-family: FontAwesome;\n    font-size: 18px;\n    background-color: #ffffff;\n    color: #ffa21d;\n    width: 29px;\n    height: 29px;\n    margin-bottom: 3px;\n    border-radius: 50%;\n    border: 2px solid #ffa21d;\n    text-align: center;\n    display: inline-block;\n    font-weight: normal;\n    outline: none;\n    cursor: pointer;\n}\n.ui-button.iconic-button.iconic-button-next-stage-submit,\n.ui-button.iconic-button.iconic-button-next-stage-submit.ui-state-hover,\n.ui-button.iconic-button.iconic-button-next-stage-submit.ui-state-focus {\n    border: 0px;\n    margin-top: 43px;\n    margin-left: -118px;\n    position: absolute;\n    z-index: 1000;\n}\n.ui-button.iconic-button.iconic-button-next-stage-submit:before,\n.ui-button.iconic-button.iconic-button-next-stage-submit.ui-state-hover:before,\n.ui-button.iconic-button.iconic-button-next-stage-submit.ui-state-focus:before {\n    font-family: FontAwesome;\n    font-size: 18px;\n    background-color: #ffffff;\n    color: #1cbdd4;\n    width: 29px;\n    height: 29px;\n    margin-bottom: 3px;\n    border-radius: 50%;\n    border: 2px solid #1cbdd4;\n    text-align: center;\n    display: inline-block;\n    font-weight: normal;\n    outline: none;\n    cursor: pointer;\n}</cssitem>\n</css>\n    </resources>\n    <styles>\n        <styleitem type=\"background\" bgtype=\"none\"/>\n    </styles>\n</skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]